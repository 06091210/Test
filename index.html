<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>テキスト保存・取得（試作）</title>
</head>
<body>
<h2>保存</h2>
  <textarea id="Username"></textarea>
  <button onclick="copyText()">LogIn</button>
<form
  action="https://formcarry.com/s/_JThRNdZp01"
  method="POST"
  enctype="multipart/form-data"
>
  <label>
    UserName:
    <input type="text" name="UserName" id="UserName">
  </label>
  <label>
    message:
    <input type="text" name="message">
  </label>
  <button type="submit">Send</button>
</form>
<!--
<textarea id="myTextarea" rows="4" cols="50">ここにテキストを入力</textarea>
<input type="text" id="myInput">
<button onclick="copyText()">コピー</button>
<script>
  function copyText() {
    const text = document.getElementById("myTextarea").value;
    document.getElementById("myInput").value = text;
  }
</script>
-->
  <h2>取得</h2>
  <div id="messages">読み込み中...</div>
  <script>
    function copyText() {
      const text = document.getElementById("Username").value;
      document.getElementById("UserName").value = text;
    }
    const API_URL = "https://api.sheetbest.com/sheets/3a58e982-d42d-4a9e-90a3-9182b5c3c9be";
    async function loadMessages() {
      const response = await fetch(API_URL);
      const messages = await response.json();

      const container = document.getElementById("messages");
      container.innerHTML = "";

      messages.reverse().forEach(msg => {
        const div = document.createElement("div");
        div.innerHTML = `<strong>${msg.name}</strong>: ${msg.message}`;
        container.appendChild(div);
      });
    }
    loadMessages();
  </script>
</body>
</html>
